
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Field Management System - Pro</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-analytics-compat.js"></script>
<script src="firebase-init.js"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

* {margin:0;padding:0;box-sizing:border-box}
body {
  font-family:'Inter',system-ui,-apple-system,sans-serif;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  background-attachment: fixed;
  color:#1a202c;
  overflow-x: hidden;
}

/* Glassmorphism background pattern */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: 
    radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3), transparent 50%),
    radial-gradient(circle at 80% 80%, rgba(252, 70, 107, 0.3), transparent 50%),
    radial-gradient(circle at 40% 20%, rgba(99, 102, 241, 0.2), transparent 50%);
  pointer-events: none;
  z-index: 0;
}

/* Sidebar */
.sidebar {
  position:fixed;
  left:0;
  top:0;
  width:300px;
  height:100vh;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px) saturate(180%);
  box-shadow: 0 8px 32px rgba(31, 38, 135, 0.15);
  border-right: 1px solid rgba(255, 255, 255, 0.18);
  transition: transform .3s ease-out;
  z-index:1000;
  overflow-y:auto;
  transform:translateX(-300px);
  will-change: transform;
}

.sidebar::-webkit-scrollbar {width: 6px;}
.sidebar::-webkit-scrollbar-track {background: transparent;}
.sidebar::-webkit-scrollbar-thumb {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 10px;
}

.sidebar.open {transform:translateX(0)}

.sidebar-header {
  padding:32px 24px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color:#fff;
  position: relative;
  overflow: hidden;
}

.sidebar-header::before {
  content: '';
  position: absolute;
  top: -50%;
  right: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
  animation: pulse 8s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.1); opacity: 0.8; }
}

.sidebar-header h5 {
  margin:0;
  font-size:20px;
  font-weight:700;
  letter-spacing: -0.5px;
  position: relative;
  z-index: 1;
}
.sidebar-header small {
  opacity:.95;
  font-size:13px;
  font-weight: 500;
  position: relative;
  z-index: 1;
}

.menu-toggle {
  position:fixed;
  top:24px;
  left:24px;
  font-size:20px;
  cursor:pointer;
  z-index:1001;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px);
  border:none;
  padding:14px 18px;
  border-radius:16px;
  box-shadow: 0 4px 20px rgba(0,0,0,.08);
  transition: all .3s cubic-bezier(0.4, 0, 0.2, 1);
  border: 1px solid rgba(255, 255, 255, 0.3);
}
.menu-toggle:hover {
  box-shadow: 0 8px 30px rgba(102, 126, 234, 0.3);
  transform: translateY(-2px);
  background: rgba(255, 255, 255, 1);
}

.menu-list {list-style:none;padding:16px 12px;margin:0;display:flex;flex-direction:column;align-items:stretch}
.menu-item {
  padding:0;
  cursor:pointer;
  border-left:3px solid transparent;
  user-select:none;
  transition: all .2s ease-out;
  font-size:14px;
  display:block;
  border-radius: 12px;
  margin-bottom: 4px;
  position: relative;
  overflow: hidden;
}

.menu-item::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  width: 3px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  transform: scaleY(0);
  transition: transform .2s ease-out;
}

.menu-item i {
  width:24px;
  text-align:center;
  color:#64748b;
  transition: all .3s;
}

.menu-item > .field-container {
  padding:14px 20px;
  display:flex;
  align-items:center;
  gap:12px;
  position: relative;
  z-index: 1;
}

.menu-item > .field-container span {display:inline-block; font-weight: 500;}

.menu-item:hover {
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.08) 0%, rgba(118, 75, 162, 0.08) 100%);
  transform: translateX(4px);
}

.menu-item:hover i {
  color: #667eea;
  transform: scale(1.1);
}

.menu-item.active {
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.15) 0%, rgba(118, 75, 162, 0.15) 100%);
  font-weight:600;
  border-left-color: transparent;
}

.menu-item.active::before {
  transform: scaleY(1);
}

.menu-item.active i {
  color:#667eea;
  transform: scale(1.15);
}

.fields-root, .fields-nested {list-style:none;padding:0;margin:0}
.fields-nested {padding-left:8px}
.fields-nested .menu-item {font-size:13px}
.fields-nested .menu-item > .field-container {padding-left:32px}

.btn-toggle {
  margin-left:auto;
  background:transparent;
  border:none;
  padding:6px 8px;
  color:#94a3b8;
  transition: all .3s;
}
.btn-toggle:hover {color:#667eea;}

.expand-arrow {
  transition: transform .3s cubic-bezier(0.4, 0, 0.2, 1);
  display:inline-block;
}
.expand-arrow.open {transform:rotate(180deg)}

.menu-children {
  max-height:0;
  overflow:hidden;
  transition: max-height .4s cubic-bezier(0.4, 0, 0.2, 1);
  background: rgba(248, 250, 252, 0.5);
  border-radius: 8px;
  margin: 4px 8px;
}
.menu-children.open {max-height:500px}
.menu-children .menu-item {padding:10px 20px 10px 50px;font-size:13px}

.section-divider {
  margin:20px 16px;
  border:0;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(100, 116, 139, 0.2), transparent);
}

.section-label {
  padding:12px 24px;
  font-size:11px;
  color:#94a3b8;
  text-transform:uppercase;
  letter-spacing:1.2px;
  font-weight:700;
}

/* Main Content */
.main-content {
  margin-left:0;
  padding:100px 40px 40px;
  min-height:100vh;
  transition: margin-left .3s ease-out;
  position: relative;
  z-index: 1;
}

/* Top Bar */
.top-bar {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px) saturate(180%);
  padding:24px 28px;
  border-radius:20px;
  box-shadow: 0 8px 32px rgba(31, 38, 135, 0.1);
  margin-bottom:32px;
  display:flex;
  gap:16px;
  flex-wrap:wrap;
  align-items:center;
  border: 1px solid rgba(255, 255, 255, 0.3);
  animation: slideDown 0.4s ease-out;
}

@keyframes slideDown {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Buttons */
.btn {
  border-radius:12px;
  padding:12px 24px;
  font-weight:600;
  transition: all .3s cubic-bezier(0.4, 0, 0.2, 1);
  border:none;
  position: relative;
  overflow: hidden;
  font-size: 14px;
  letter-spacing: 0.3px;
}

.btn::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.3);
  transform: translate(-50%, -50%);
  transition: width .6s, height .6s;
}

.btn:hover::before {
  width: 300px;
  height: 300px;
}

.btn-primary {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color:#fff;
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
}
.btn-primary:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 25px rgba(102, 126, 234, 0.5);
}

.btn-success {
  background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
  box-shadow: 0 4px 15px rgba(17, 153, 142, 0.4);
}
.btn-success:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 25px rgba(17, 153, 142, 0.5);
}

.btn-outline-primary {
  background: rgba(255, 255, 255, 0.9);
  color:#667eea;
  border:2px solid #667eea;
  backdrop-filter: blur(10px);
}
.btn-outline-primary:hover {
  background:#667eea;
  color:#fff;
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
}

/* Cards */
.field-grid {
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(340px,1fr));
  gap:28px;
  margin-top:32px;
}

.field-card {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px) saturate(180%);
  border-radius:20px;
  padding:28px;
  box-shadow: 0 8px 32px rgba(31, 38, 135, 0.1);
  cursor:pointer;
  transition: all .25s ease-out;
  border: 1px solid rgba(255, 255, 255, 0.3);
  position: relative;
  overflow: hidden;
  will-change: transform;
}

.field-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
  transform: scaleX(0);
  transition: transform .25s ease-out;
}

.field-card:hover::before {
  transform: scaleX(1);
}

.field-card:hover {
  transform: translateY(-8px) scale(1.02);
  box-shadow: 0 20px 60px rgba(102, 126, 234, 0.2);
  border-color: rgba(102, 126, 234, 0.3);
}

.field-card-title {
  font-size:20px;
  font-weight:700;
  margin-bottom:20px;
  color:#1a202c;
  letter-spacing: -0.5px;
}

/* Spreadsheet */
.spreadsheet-container {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px) saturate(180%);
  border-radius:20px;
  box-shadow: 0 8px 32px rgba(31, 38, 135, 0.1);
  overflow:hidden;
  margin-top:28px;
  border: 1px solid rgba(255, 255, 255, 0.3);
}

.spreadsheet-toolbar {
  padding:20px 24px;
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
  border-bottom:1px solid rgba(226, 232, 240, 0.8);
  display:flex;
  gap:12px;
  flex-wrap:wrap;
}

.spreadsheet-table {width:100%;border-collapse:collapse;font-size:13px}
.spreadsheet-table thead {
  background: linear-gradient(135deg, rgba(248, 250, 252, 0.95) 0%, rgba(241, 245, 249, 0.95) 100%);
  position:sticky;
  top:0;
  z-index:10;
}
.spreadsheet-table th {
  padding:16px 14px;
  text-align:left;
  font-weight:700;
  border:1px solid #e2e8f0;
  white-space:nowrap;
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: #475569;
}
.spreadsheet-table td {
  padding:12px 14px;
  border:1px solid #e2e8f0;
  background:#fff;
  transition: background .2s;
}
.spreadsheet-table tbody tr:hover {
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.03) 0%, rgba(118, 75, 162, 0.03) 100%);
}
.spreadsheet-table input {
  border:none;
  background:transparent;
  width:100%;
  padding:4px;
  font-size:13px;
}
.spreadsheet-table input:focus {
  outline:2px solid #667eea;
  border-radius:6px;
  background: rgba(102, 126, 234, 0.05);
}

/* Chart Container */
.chart-container {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px) saturate(180%);
  padding:32px;
  border-radius:20px;
  box-shadow: 0 8px 32px rgba(31, 38, 135, 0.1);
  margin-top:28px;
  border: 1px solid rgba(255, 255, 255, 0.3);
}
.chart-title {
  font-size:18px;
  font-weight:700;
  margin-bottom:24px;
  color:#1a202c;
  letter-spacing: -0.3px;
}
.chart-wrapper {position:relative;min-height:400px}

/* Stats */
.stat-boxes {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
  gap:24px;
  margin-bottom:32px;
}

.stat-box {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px) saturate(180%);
  padding:28px;
  border-radius:20px;
  box-shadow: 0 8px 32px rgba(31, 38, 135, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-left: 4px solid transparent;
  transition: all .4s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}

.stat-box::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.03) 0%, rgba(118, 75, 162, 0.03) 100%);
  opacity: 0;
  transition: opacity .4s;
}

.stat-box:hover::before {
  opacity: 1;
}

.stat-box:hover {
  transform: translateY(-6px) scale(1.02);
  box-shadow: 0 16px 48px rgba(102, 126, 234, 0.15);
  border-left-color: #667eea;
}

.stat-label {
  font-size:12px;
  color:#64748b;
  margin-bottom:12px;
  text-transform:uppercase;
  letter-spacing:1px;
  font-weight:700;
  position: relative;
  z-index: 1;
}

.stat-value {
  font-size:36px;
  font-weight:800;
  color:#1a202c;
  letter-spacing: -1px;
  position: relative;
  z-index: 1;
}

.stat-icon {
  float:right;
  font-size:32px;
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.2) 0%, rgba(118, 75, 162, 0.2) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Forms */
.form-card {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px) saturate(180%);
  padding:32px;
  border-radius:20px;
  box-shadow: 0 8px 32px rgba(31, 38, 135, 0.1);
  margin-bottom:28px;
  border: 1px solid rgba(255, 255, 255, 0.3);
}

.form-field-builder {
  border:2px dashed rgba(102, 126, 234, 0.3);
  padding:24px;
  border-radius:16px;
  margin-top:20px;
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.03) 0%, rgba(118, 75, 162, 0.03) 100%);
}

.field-type-selector {
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(130px,1fr));
  gap:12px;
  margin-top:20px;
}

.field-type-btn {
  padding:18px;
  border:2px solid rgba(226, 232, 240, 0.8);
  border-radius:12px;
  background: rgba(255, 255, 255, 0.9);
  cursor:pointer;
  text-align:center;
  transition: all .3s cubic-bezier(0.4, 0, 0.2, 1);
  font-size:13px;
  font-weight: 600;
}

.field-type-btn:hover {
  border-color:#667eea;
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.08) 0%, rgba(118, 75, 162, 0.08) 100%);
  transform: translateY(-3px);
  box-shadow: 0 8px 20px rgba(102, 126, 234, 0.15);
}

.field-type-btn.selected {
  border-color:#667eea;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color:#fff;
  transform: scale(1.05);
  box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
}

/* Login */
.login-container {
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
  position: relative;
  z-index: 1;
}

.login-box {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px) saturate(180%);
  padding:48px;
  border-radius:24px;
  width:460px;
  box-shadow: 0 20px 80px rgba(0,0,0,.2);
  border: 1px solid rgba(255, 255, 255, 0.3);
  animation: fadeInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}

.login-logo {text-align:center;margin-bottom:36px}
.login-logo i {
  font-size:56px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.login-logo h3 {
  margin-top: 16px;
  font-weight: 800;
  letter-spacing: -0.5px;
}

.form-control, .form-select {
  border-radius: 12px;
  border: 2px solid rgba(226, 232, 240, 0.8);
  padding: 12px 16px;
  transition: all .3s;
  background: rgba(255, 255, 255, 0.9);
}

.form-control:focus, .form-select:focus {
  border-color: #667eea;
  box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
  background: #fff;
}

.form-label {
  font-weight: 600;
  color: #475569;
  margin-bottom: 8px;
  font-size: 14px;
}

/* Utilities */
.hidden {display:none!important}
.badge {
  padding:8px 14px;
  border-radius:8px;
  font-size:11px;
  font-weight:700;
  text-transform:uppercase;
  letter-spacing: 0.5px;
}
.table {margin-bottom:0}

/* Modal Enhancements */
.modal-content {
  border-radius:20px;
  border:none;
  background: rgba(255, 255, 255, 0.98);
  backdrop-filter: blur(20px);
  box-shadow: 0 20px 80px rgba(0,0,0,.15);
}
.modal-header {
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
  border-radius:20px 20px 0 0;
  border-bottom:1px solid rgba(226, 232, 240, 0.8);
  padding: 24px 28px;
}

.modal-title {
  font-weight: 700;
  letter-spacing: -0.3px;
}

.modal-body {
  padding: 28px;
}

.modal-footer {
  padding: 20px 28px;
  border-top: 1px solid rgba(226, 232, 240, 0.8);
}

/* Tabs */
.nav-tabs {border-bottom:2px solid rgba(226, 232, 240, 0.8)}
.nav-tabs .nav-link {
  border:none;
  color:#64748b;
  padding:14px 28px;
  font-weight:600;
  transition: all .3s;
  border-radius: 12px 12px 0 0;
}
.nav-tabs .nav-link:hover {
  color:#667eea;
  background: rgba(102, 126, 234, 0.05);
}
.nav-tabs .nav-link.active {
  color:#667eea;
  border-bottom:3px solid #667eea;
  margin-bottom:-2px;
  background: rgba(102, 126, 234, 0.08);
}

/* Loading */
.loading {text-align:center;padding:60px;color:#64748b}
.spinner {
  border:4px solid rgba(248, 250, 252, 0.8);
  border-top:4px solid #667eea;
  border-radius:50%;
  width:48px;
  height:48px;
  animation:spin 1s linear infinite;
  margin:0 auto;
}
@keyframes spin {
  0%{transform:rotate(0deg)}
  100%{transform:rotate(360deg)}
}

/* Floating animation for cards */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
}

/* Responsive */
@media (max-width:768px) {
  .sidebar {width:100%;transform:translateX(-100%)}
  .main-content {padding:90px 20px 20px}
  .stat-boxes {grid-template-columns:1fr}
  .field-grid {grid-template-columns:1fr}
  .login-box {width: 90%; padding: 32px;}
  .top-bar {padding: 20px;}
}

/* Smooth page transitions - optimized */
.main-content > * {
  animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Hover effects for interactive elements */
.btn, .field-card, .stat-box, .menu-item {
  will-change: transform;
}

/* Custom scrollbar for main content */
::-webkit-scrollbar {width: 10px; height: 10px;}
::-webkit-scrollbar-track {background: rgba(248, 250, 252, 0.5);}
::-webkit-scrollbar-thumb {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 10px;
}
::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
}






/* Form Builder Enhanced Styles */
.card {
  transition: all 0.3s ease;
}

.card:hover {
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

/* Field type buttons */
.btn-outline-primary {
  border-width: 2px;
  font-weight: 500;
  transition: all 0.2s;
}

.btn-outline-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
}

/* Options container styling */
#form-fields-container .input-group {
  transition: background-color 0.2s;
}

#form-fields-container .input-group:hover {
  background-color: #f8f9fa;
}

/* Section title styling in forms */
.border-bottom {
  border-color: #667eea !important;
  border-width: 2px !important;
}

/* Rating stars styling */
.rating-container {
  display: flex;
  gap: 8px;
  padding: 10px 0;
}

.rating-star {
  cursor: pointer;
  font-size: 24px;
  color: #ddd;
  transition: color 0.2s;
}

.rating-star input {
  display: none;
}

.rating-star input:checked ~ i,
.rating-star:hover i {
  color: #ffc107;
}

.rating-star:has(input:checked) i {
  color: #ffc107;
}

/* Multiselect container */
.form-check {
  padding: 8px;
  border-radius: 4px;
  transition: background-color 0.2s;
}

.form-check:hover {
  background-color: #f8f9fa;
}

/* Preview modal styling */
#form-preview-content {
  background: #f8f9fa;
  border-radius: 8px;
}

#form-preview-content h4 {
  color: #667eea;
  font-weight: 600;
}

/* Field reorder buttons */
.btn-sm i {
  font-size: 12px;
}

/* Drag handle visual (optional future enhancement) */
.card-body:hover {
  cursor: move;
}

/* Required field indicator */
.text-danger {
  font-weight: bold;
  margin-left: 2px;
}

/* Form validation feedback */
input:invalid,
textarea:invalid,
select:invalid {
  border-color: #dc3545;
}

input:valid,
textarea:valid,
select:valid {
  border-color: #28a745;
}

/* Placeholder styling */
::placeholder {
  color: #adb5bd !important;
  opacity: 1;
}

/* File upload styling */
input[type="file"] {
  padding: 8px;
}

input[type="file"]::-webkit-file-upload-button {
  background: #667eea;
  color: white;
  border: none;
  padding: 6px 12px;
  border-radius: 4px;
  cursor: pointer;
  margin-right: 10px;
}

input[type="file"]::-webkit-file-upload-button:hover {
  background: #5568d3;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .d-flex.flex-wrap.gap-2 {
    justify-content: center;
  }
  
  .btn-sm {
    font-size: 11px;
    padding: 4px 8px;
  }
  
  .rating-container {
    justify-content: center;
  }
}

/* Loading state (optional) */
.btn-primary:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* Success animation (optional) */
@keyframes successPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.btn-success:active {
  animation: successPulse 0.3s ease;
}







</style>
</head>
<body>

<!-- Login Screen -->
<div id="login-screen">
<div class="login-container">
<div class="login-box">
<div class="login-logo">
<i class="fas fa-chart-line"></i>
<h3 class="mt-3">Field Management System</h3>
<p class="text-muted small">Production Edition</p>
</div>
<div class="mb-3">
  <label class="form-label">Login As</label>
  <select class="form-select" id="login-type">
    <option value="admin">Administrator</option>
    <option value="agent">Field Agent</option>
  </select>
</div>

<div class="mb-3" id="admin-email-group">
  <label class="form-label">Admin Email</label>
  <input type="email" class="form-control" id="admin-email" placeholder="Enter admin email">
</div>

<div class="mb-3 hidden" id="agent-email-group">
  <label class="form-label">Agent Email</label>
  <input type="email" class="form-control" id="agent-email" placeholder="Enter your agent email">
</div>

<div class="mb-3">
  <label class="form-label">Password</label>
  <input type="password" class="form-control" id="login-password" value="admin123">
</div>
<button onclick="handleLogin()" class="btn btn-primary w-100">
<i class="fas fa-sign-in-alt me-2"></i>Login
</button>
<div class="text-center mt-3">
<a href="registration.html" class="small">New admin? Create an account</a>
</div>
</div>
</div>
</div>

<!-- Admin Screen -->
<div id="admin-screen" class="hidden">
<button class="menu-toggle" onclick="toggleSidebar()">
<i class="fas fa-bars"></i>
</button>

<div class="sidebar" id="sidebar">
<div class="sidebar-header">
<h5><i class="fas fa-user-shield me-2"></i>Admin Panel</h5>
<small>Administrator</small>
</div>
<ul class="menu-list">
<li class="menu-item active" onclick="showAdminHome()">
<div class="field-container">
<i class="fas fa-home"></i><span>Dashboard</span>
</div>
</li>
<li class="menu-item" onclick="showAllForms()">
<div class="field-container">
<i class="fas fa-file-alt"></i><span>All Forms</span>
</div>
</li>
<li class="menu-item" onclick="showAllAgents()">
<div class="field-container">
<i class="fas fa-users"></i><span>All Agents</span>
</div>
</li>
</ul>
<div class="section-divider"></div>
<div class="section-label">Our Fields</div>
<ul class="menu-list" id="fields-menu"></ul>
<div class="section-divider"></div>
<ul class="menu-list">
<li class="menu-item" onclick="exportAllData()">
<div class="field-container">
<i class="fas fa-download"></i><span>Export Data</span>
</div>
</li>
<li class="menu-item" onclick="openProfileModal()">
<div class="field-container">
<i class="fas fa-user-cog"></i><span>Profile</span>
</div>
</li>
<li class="menu-item" onclick="logout()">
<div class="field-container">
<i class="fas fa-sign-out-alt"></i><span>Logout</span>
</div>
</li>
</ul>
</div>

<div class="main-content" id="admin-content"></div>
</div>

<!-- Agent Screen -->
<div id="agent-screen" class="hidden">
<button class="menu-toggle" onclick="toggleSidebar()">
<i class="fas fa-bars"></i>
</button>

<div class="sidebar" id="agent-sidebar">
<div class="sidebar-header">
<h5><i class="fas fa-user me-2"></i>Field Agent</h5>
<small id="agent-name-display"></small>
</div>
<ul class="menu-list">
<li class="menu-item active" onclick="showAgentForms()">
<div class="field-container">
<i class="fas fa-clipboard-list"></i><span>My Forms</span>
</div>
</li>
<li class="menu-item" onclick="showAgentSubmissions()">
<div class="field-container">
<i class="fas fa-check-circle"></i><span>Submissions</span>
</div>
</li>
</ul>
<div class="section-divider"></div>
<ul class="menu-list">
<li class="menu-item" onclick="logout()">
<div class="field-container">
<i class="fas fa-sign-out-alt"></i><span>Logout</span>
</div>
</li>
</ul>
</div>

<div class="main-content" id="agent-content"></div>
</div>

<!-- Modals -->
<!-- Form Preview Modal -->
<div class="modal fade" id="formPreviewModal" tabindex="-1">
  <div class="modal-dialog modal-lg modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">
          <i class="fas fa-eye me-2"></i>Form Preview
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div id="form-preview-content"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>




<!-- Field Modal - COMPLETE STRUCTURE -->
<div class="modal fade" id="fieldModal" tabindex="-1" aria-labelledby="fieldModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="fieldModalLabel">
          <i class="fas fa-folder-plus me-2"></i>Create New Field
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="mb-3">
          <label class="form-label">Field Name *</label>
          <input type="text" id="new-field-name" class="form-control" placeholder="e.g., MEASUREMENTS">
        </div>
        <div class="mb-3">
          <label class="form-label">Parent Field (Optional)</label>
          <select id="new-field-parent" class="form-select">
            <option value="">-- Root Level --</option>
          </select>
        </div>
        <div class="mb-3">
          <label class="form-label">Description</label>
          <textarea id="new-field-desc" class="form-control" rows="2" placeholder="Enter a brief description of this field"></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          <i class="fas fa-times me-2"></i>Cancel
        </button>
        <button type="button" class="btn btn-primary" onclick="createField()">
          <i class="fas fa-check me-2"></i>Create Field
        </button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="profileModal" tabindex="-1">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<h5 class="modal-title"><i class="fas fa-user-cog me-2"></i>Profile & Admin Settings</h5>
<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
<div class="mb-3">
<label class="form-label">Display Name</label>
<input type="text" id="profile-name" class="form-control" placeholder="Administrator">
</div>
<hr>
<div class="mb-2">
<label class="form-label">Grant Admin Access (Email)</label>
<input type="email" id="grant-admin-email" class="form-control" placeholder="user@example.com">
<div class="form-text">The user must register/login with this email to become admin.</div>
</div>
</div>
<div class="modal-footer">
<button type="button" class="btn btn-outline-primary" onclick="grantAdminAccess()">
<i class="fas fa-user-shield me-2"></i>Grant Admin
</button>
<button type="button" class="btn btn-primary" onclick="saveProfile()">
<i class="fas fa-save me-2"></i>Save Profile
</button>
</div>
</div>
</div>
</div>

<div class="modal fade" id="agentModal" tabindex="-1">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<h5 class="modal-title"><i class="fas fa-user-plus me-2"></i>Assign Agent to Field</h5>
<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
<div class="mb-3">
<label class="form-label">Agent Name *</label>
<input type="text" id="new-agent-name" class="form-control">
</div>
<div class="mb-3">
<label class="form-label">Agent ID *</label>
<input type="text" id="new-agent-id" class="form-control">
</div>
<div class="mb-3">
<label class="form-label">Email</label>
<input type="email" id="new-agent-email" class="form-control">
</div>
<div class="mb-3">
<label class="form-label">Phone</label>
<input type="tel" id="new-agent-phone" class="form-control">
</div>
<div class="mb-3">
<label class="form-label">Assign to Field *</label>
<select id="new-agent-field" class="form-select"></select>
</div>
<div class="mb-3">
<label class="form-label">Password *</label>
<input type="password" id="new-agent-password" class="form-control" value="agent123">
</div>
</div>
<div class="modal-footer">
<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
<button type="button" class="btn btn-primary" onclick="createAgent()">
<i class="fas fa-check me-2"></i>Create
</button>
</div>
</div>
</div>
</div>

<div class="modal fade" id="formModal" tabindex="-1">
<div class="modal-dialog modal-xl">
<div class="modal-content">
<div class="modal-header">
<h5 class="modal-title"><i class="fas fa-file-alt me-2"></i>Create Form</h5>
<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
<div class="row">
<div class="col-md-6 mb-3">
<label class="form-label">Form Name *</label>
<input type="text" id="new-form-name" class="form-control">
</div>
<div class="col-md-6 mb-3">
<label class="form-label">Assign to Field *</label>
<select id="new-form-field" class="form-select"></select>
</div>
</div>
<div class="mb-3">
<label class="form-label">Description</label>
<textarea id="new-form-desc" class="form-control" rows="2"></textarea>
</div>
<hr>
<h6 class="mb-3">Form Fields</h6>


<div class="mb-3">
  <label class="form-label">Add Form Fields</label>
  <div class="d-flex flex-wrap gap-2">
    <button type="button" class="btn btn-sm btn-outline-primary" onclick="addFormField('text')">
      <i class="fas fa-font"></i> Text
    </button>
    <button type="button" class="btn btn-sm btn-outline-primary" onclick="addFormField('textarea')">
      <i class="fas fa-align-left"></i> Paragraph
    </button>
    <button type="button" class="btn btn-sm btn-outline-primary" onclick="addFormField('number')">
      <i class="fas fa-hashtag"></i> Number
    </button>
    <button type="button" class="btn btn-sm btn-outline-primary" onclick="addFormField('email')">
      <i class="fas fa-envelope"></i> Email
    </button>
    <button type="button" class="btn btn-sm btn-outline-primary" onclick="addFormField('phone')">
      <i class="fas fa-phone"></i> Phone
    </button>
    <button type="button" class="btn btn-sm btn-outline-primary" onclick="addFormField('date')">
      <i class="fas fa-calendar"></i> Date
    </button>
    <button type="button" class="btn btn-sm btn-outline-primary" onclick="addFormField('time')">
      <i class="fas fa-clock"></i> Time
    </button>
    <button type="button" class="btn btn-sm btn-outline-primary" onclick="addFormField('select')">
      <i class="fas fa-list"></i> Dropdown
    </button>
    <button type="button" class="btn btn-sm btn-outline-primary" onclick="addFormField('radio')">
      <i class="fas fa-dot-circle"></i> Multiple Choice
    </button>
    <button type="button" class="btn btn-sm btn-outline-primary" onclick="addFormField('checkbox')">
      <i class="fas fa-check-square"></i> Checkbox
    </button>
    <button type="button" class="btn btn-sm btn-outline-primary" onclick="addFormField('multiselect')">
      <i class="fas fa-tasks"></i> Multiselect
    </button>
    <button type="button" class="btn btn-sm btn-outline-primary" onclick="addFormField('file')">
      <i class="fas fa-file-upload"></i> File Upload
    </button>
    <button type="button" class="btn btn-sm btn-outline-primary" onclick="addFormField('rating')">
      <i class="fas fa-star"></i> Rating
    </button>
    <button type="button" class="btn btn-sm btn-outline-success" onclick="addFormField('section')">
      <i class="fas fa-heading"></i> Section Title
    </button>
  </div>
</div>

<div class="mb-3">
  <label class="form-label">Quick Start Templates</label>
  <div class="d-flex flex-wrap gap-2">
    <button type="button" class="btn btn-sm btn-outline-secondary" onclick="loadFormTemplate('contact')">
      <i class="fas fa-address-card me-1"></i> Contact Form
    </button>
    <button type="button" class="btn btn-sm btn-outline-secondary" onclick="loadFormTemplate('survey')">
      <i class="fas fa-poll me-1"></i> Survey
    </button>
    <button type="button" class="btn btn-sm btn-outline-secondary" onclick="loadFormTemplate('registration')">
      <i class="fas fa-user-plus me-1"></i> Registration
    </button>
    <button type="button" class="btn btn-sm btn-outline-secondary" onclick="loadFormTemplate('feedback')">
      <i class="fas fa-comment me-1"></i> Feedback
    </button>
  </div>
  <small class="text-muted">Load a template and customize it to your needs</small>
</div>

<div class="d-flex justify-content-between align-items-center mb-2">
  <label class="form-label mb-0">Form Fields</label>
  <span id="field-count-badge" class="badge bg-primary" style="display: none;">0</span>
</div>
<div id="form-fields-container"></div>

<div id="form-fields-container" class="mt-3"></div>
</div>
<div class="modal-footer">
  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
  <button type="button" class="btn btn-info" onclick="previewForm()">
    <i class="fas fa-eye me-2"></i>Preview
  </button>
  <button type="button" class="btn btn-primary" onclick="createForm()">
    <i class="fas fa-check me-2"></i>Create Form
  </button>
</div>
</div>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>

<!-- Application Modules -->

<script src="app.js"></script>
</body>
</html>